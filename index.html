<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Medical Infusion Rate Calculator</title>

  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg-primary:#ffffff;
      --bg-secondary:#fff8e1;
      --bg-card:#ffffff;
      --text-primary:#121212;
      --text-secondary:#546e7a;
      --text-tertiary:#b0bec5;
      --border-color:#e1f5fe;
      --shadow:0 8px 20px rgba(0,0,0,0.1);
      --shadow-hover:0 10px 25px rgba(0,0,0,0.15);
      --primary-accent:#0089f0;
      --caution-color:#ffeb3b;
      --reversal:#ff1744;
      --analgesic:#00c853;
      --infusion:#009688;
      --radius-card:16px;
      --radius-input:10px;
    }

    body.dark-mode{
      --bg-primary:#000000;
      --bg-secondary:#111111;
      --bg-card:#222222;
      --text-primary:#f5f5f5;
      --text-secondary:#bbbbbb;
      --border-color:#4a4a4a;
      --shadow:0 8px 20px rgba(0,0,0,0.6);
      --shadow-hover:0 10px 25px rgba(0,0,0,0.8);
      --caution-color:#fbc02d;
    }

    /* Reset & base */
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{
      font-family:'Montserrat',sans-serif;
      background:var(--bg-secondary);
      color:var(--text-primary);
      line-height:1.5;
      font-size:0.9rem;
      transition:background-color .4s,color .4s;
      user-select:none;
      -webkit-font-smoothing:antialiased;
      height:100%;
    }
    input,textarea,select{user-select:text!important}

    .container{max-width:1200px;margin:0 auto;padding:15px 10px;min-height:100vh}

    /* Header */
    header{
      background:var(--primary-accent);
      color:var(--bg-primary);
      padding:15px;
      border-radius:var(--radius-card);
      box-shadow:var(--shadow);
      margin-bottom:15px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      flex-wrap: wrap;
      gap: 10px;
    }
    h1{font-size:1.6em;font-weight:700}
    .dark-mode-toggle{
      background:var(--bg-primary);
      color:var(--primary-accent);
      border:none;border-radius:50px;padding:8px 16px;
      cursor:pointer;font-size:.75em;font-weight:600;
      box-shadow:0 2px 5px rgba(0,0,0,.2);transition:all .18s ease;
      -webkit-tap-highlight-color:transparent;
      outline:none;
    }
    .dark-mode-toggle:active{transform:translateY(1px)}
    .dark-mode-toggle::-moz-focus-inner{border:0}

    /* Sections */
    .section{
      background:var(--bg-card);
      padding:15px;border-radius:var(--radius-card);
      box-shadow:var(--shadow);margin-bottom:15px;transition:box-shadow .3s ease;
    }
    .section h2{
      font-size:1.3em;font-weight:600;margin-bottom:12px;color:var(--text-primary);
      border-bottom:2px solid var(--border-color);padding-bottom:6px;
    }

    /* Info boxes */
    .info-box {
      background: var(--bg-secondary);
      border-left: 4px solid var(--primary-accent);
      padding: 12px 15px;
      margin: 15px 0;
      border-radius: 8px;
      font-size: 0.85em;
      color: var(--text-secondary);
    }
    .info-box strong {
      color: var(--primary-accent);
    }

    /* Calculator cards */
    .calculator-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 15px;
      margin-top: 10px;
    }

    @media (min-width: 768px) {
      .calculator-grid {
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      }
    }

    .calculator-card {
      background: var(--bg-secondary);
      border-radius: var(--radius-card);
      padding: 15px;
      border-left: 6px solid var(--infusion);
      transition: all 0.3s ease;
    }

    .calculator-card:hover {
      box-shadow: var(--shadow-hover);
      transform: translateY(-2px);
    }

    .calculator-title {
      font-size: 1.1em;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 12px;
      display: flex;
      align-items: center;
    }

    .calculator-title::before {
      content: "‚ñ∂";
      margin-right: 8px;
      font-size: 0.8em;
      color: var(--infusion);
    }

    /* Input groups */
    .input-group {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .input-field {
      display: flex;
      flex-direction: column;
    }

    .input-field label {
      font-size: 0.8em;
      color: var(--text-secondary);
      margin-bottom: 5px;
      font-weight: 600;
      display: block;
    }

    .input-field input, .input-field select {
      width: 100%;
      padding: 8px 10px;
      border: 1px solid var(--border-color);
      border-radius: var(--radius-input);
      font-size: 0.9em;
      background: var(--bg-primary);
      color: var(--text-primary);
      transition: border-color 0.3s, box-shadow 0.3s;
    }

    .input-field input:focus, .input-field select:focus {
      outline: none;
      border-color: var(--primary-accent);
      box-shadow: 0 0 0 3px rgba(0,137,240,.2);
    }

    /* Results */
    .calculation-result {
      background: var(--bg-card);
      padding: 12px;
      border-radius: var(--radius-input);
      margin-top: 12px;
      border: 1px solid var(--border-color);
    }

    .result-value {
      font-weight: 800;
      font-size: 1.4em;
      color: var(--infusion);
      text-align: center;
      margin: 5px 0;
    }

    .result-label {
      font-size: 0.8em;
      color: var(--text-secondary);
      text-align: center;
      font-weight: 600;
    }

    .result-note {
      font-size: 0.75em;
      color: var(--text-secondary);
      text-align: center;
      margin-top: 5px;
      font-style: italic;
    }

    /* Button */
    .calculate-btn {
      background: var(--primary-accent);
      color: var(--bg-primary);
      border: none;
      padding: 10px 15px;
      border-radius: var(--radius-input);
      font-size: 0.9em;
      cursor: pointer;
      font-weight: 600;
      margin-top: 10px;
      transition: all 0.3s ease;
      width: 100%;
    }

    .calculate-btn:hover {
      background: #0070c0;
      box-shadow: 0 4px 10px rgba(0,137,240,.3);
    }

    /* Warning */
    .warning{
      background:#fff3cd;
      border-left:5px solid #ffc107;
      padding:12px;
      margin:15px 0;
      border-radius:8px;
      font-size:.85em;
      color:#856404;
      font-weight:500;
      box-shadow:0 1px 3px rgba(0,0,0,.05);
    }
    body.dark-mode .warning{
      background:#4a3f00;
      color:#ffeb3b;
      border-left:5px solid #ff9800;
    }

    /* Footer */
    footer {
      text-align: center;
      margin-top: 20px;
      padding: 15px;
      font-size: 0.8em;
      color: var(--text-secondary);
    }

    footer a {
      color: var(--primary-accent);
      text-decoration: none;
    }
  </style>
</head>

<body>
  <div class="container">
    <header>
      <h1>Medical Infusion Rate Calculator</h1>
      <button class="dark-mode-toggle" onclick="toggleDarkMode()" aria-label="Toggle dark mode">üåô Dark Mode</button>
    </header>

    <div class="warning">
      ‚ö†Ô∏è Disclaimer: This calculator is for educational and reference purposes only. Always verify calculations and use professional clinical judgment. The developers disclaim all liability for damages arising from the use of this tool.
    </div>

    <section class="section">
      <h2>Infusion Rate Calculators</h2>
      <div class="info-box">
        <strong>Quick Guide:</strong> Select the appropriate calculator based on your needs. All calculators work in real-time as you input values.
      </div>
      
      <div class="calculator-grid">
        
        <!-- Rate Calculator -->
        <div class="calculator-card">
          <div class="calculator-title">Rate Calculator (mL/hr & gtts/min)</div>
          <div class="input-group">
            <div class="input-field">
              <label for="total-volume">Total Volume (mL)</label>
              <input type="number" id="total-volume" placeholder="Enter volume" step="0.1" min="0" oninput="calculateRate()">
            </div>
            
            <div class="input-field">
              <label for="total-time">Total Time</label>
              <div style="display: flex; gap: 10px;">
                <input type="number" id="time-hours" placeholder="Hours" step="0.1" min="0" oninput="calculateRate()" style="flex: 1;">
                <input type="number" id="time-minutes" placeholder="Minutes" step="1" min="0" max="59" oninput="calculateRate()" style="flex: 1;">
              </div>
            </div>
            
            <div class="input-field">
              <label for="drop-factor">Drop Factor (gtts/mL)</label>
              <select id="drop-factor" onchange="calculateRate()">
                <option value="10">Macrodrip - 10 gtts/mL</option>
                <option value="15">Macrodrip - 15 gtts/mL</option>
                <option value="20">Macrodrip - 20 gtts/mL</option>
                <option value="60">Microdrip - 60 gtts/mL</option>
                <option value="custom">Custom</option>
              </select>
              <input type="number" id="custom-drop-factor" placeholder="Enter custom value" step="1" min="1" style="display: none; margin-top: 5px;" oninput="calculateRate()">
            </div>
          </div>
          
          <div class="calculation-result">
            <div class="result-label">Infusion Rate</div>
            <div class="result-value" id="rate-result">--</div>
            <div class="result-label">Drip Rate</div>
            <div class="result-value" id="drip-result">--</div>
            <div class="result-note" id="rate-note"></div>
          </div>
        </div>

        <!-- Dose-Based Calculator -->
        <div class="calculator-card">
          <div class="calculator-title">Dose-Based Rate Calculator</div>
          <div class="input-group">
            <div class="input-field">
              <label for="desired-dose">Desired Dose</label>
              <input type="number" id="desired-dose" placeholder="Enter dose" step="0.1" min="0" oninput="calculateDoseRate()">
            </div>
            
            <div class="input-field">
              <label for="dose-unit">Dose Unit</label>
              <select id="dose-unit" onchange="calculateDoseRate()">
                <option value="mcg/kg/min">mcg/kg/min</option>
                <option value="mg/kg/min">mg/kg/min</option>
                <option value="mcg/min">mcg/min</option>
                <option value="mg/min">mg/min</option>
                <option value="units/kg/hr">units/kg/hr</option>
                <option value="units/hr">units/hr</option>
              </select>
            </div>
            
            <div class="input-field">
              <label for="patient-weight">Patient Weight (kg)</label>
              <input type="number" id="patient-weight" placeholder="Enter weight" step="0.1" min="0" oninput="calculateDoseRate()">
            </div>
            
            <div class="input-field">
              <label for="med-concentration">Medication Concentration</label>
              <div style="display: flex; gap: 5px; align-items: center;">
                <input type="number" id="med-amount" placeholder="Amount" step="0.1" min="0" oninput="calculateDoseRate()" style="flex: 1;">
                <select id="med-unit" onchange="calculateDoseRate()" style="flex: 1;">
                  <option value="mg">mg</option>
                  <option value="mcg">mcg</option>
                  <option value="g">g</option>
                  <option value="units">units</option>
                </select>
                <span style="color: var(--text-secondary);">in</span>
                <input type="number" id="med-volume" placeholder="Volume" step="0.1" min="0" oninput="calculateDoseRate()" style="flex: 1;">
                <span style="color: var(--text-secondary);">mL</span>
              </div>
            </div>
          </div>
          
          <div class="calculation-result">
            <div class="result-label">Infusion Rate</div>
            <div class="result-value" id="dose-rate-result">--</div>
            <div class="result-note" id="dose-rate-note"></div>
          </div>
        </div>

        <!-- Duration Calculator -->
        <div class="calculator-card">
          <div class="calculator-title">Duration Calculator</div>
          <div class="input-group">
            <div class="input-field">
              <label for="duration-volume">Total Volume (mL)</label>
              <input type="number" id="duration-volume" placeholder="Enter volume" step="0.1" min="0" oninput="calculateDuration()">
            </div>
            
            <div class="input-field">
              <label for="infusion-rate">Infusion Rate (mL/hr)</label>
              <input type="number" id="infusion-rate" placeholder="Enter rate" step="0.1" min="0" oninput="calculateDuration()">
            </div>
          </div>
          
          <div class="calculation-result">
            <div class="result-label">Infusion Duration</div>
            <div class="result-value" id="duration-result">--</div>
            <div class="result-note" id="duration-note"></div>
          </div>
        </div>

        <!-- Volume Calculator -->
        <div class="calculator-card">
          <div class="calculator-title">Volume Calculator</div>
          <div class="input-group">
            <div class="input-field">
              <label for="volume-rate">Infusion Rate (mL/hr)</label>
              <input type="number" id="volume-rate" placeholder="Enter rate" step="0.1" min="0" oninput="calculateVolume()">
            </div>
            
            <div class="input-field">
              <label for="infusion-time">Infusion Time</label>
              <div style="display: flex; gap: 10px;">
                <input type="number" id="volume-hours" placeholder="Hours" step="0.1" min="0" oninput="calculateVolume()" style="flex: 1;">
                <input type="number" id="volume-minutes" placeholder="Minutes" step="1" min="0" max="59" oninput="calculateVolume()" style="flex: 1;">
              </div>
            </div>
          </div>
          
          <div class="calculation-result">
            <div class="result-label">Total Volume</div>
            <div class="result-value" id="volume-result">--</div>
            <div class="result-note" id="volume-note"></div>
          </div>
        </div>

      </div>
    </section>

    <section class="section">
      <h2>Common Infusion Medications</h2>
      <div class="info-box">
        <strong>Reference:</strong> Standard concentrations for common IV infusions. Always verify with your institution's protocols.
      </div>
      
      <div class="calculator-grid">
        <div class="calculator-card">
          <div class="calculator-title">Vasoactive Drugs</div>
          <div style="font-size: 0.8em; color: var(--text-secondary);">
            <div style="margin-bottom: 8px;"><strong>Noradrenaline:</strong> 4 mg in 50 mL (80 mcg/mL)</div>
            <div style="margin-bottom: 8px;"><strong>Adrenaline:</strong> 4 mg in 50 mL (80 mcg/mL)</div>
            <div style="margin-bottom: 8px;"><strong>Dopamine:</strong> 400 mg in 250 mL (1600 mcg/mL)</div>
            <div><strong>Dobutamine:</strong> 500 mg in 250 mL (2000 mcg/mL)</div>
          </div>
        </div>
        
        <div class="calculator-card">
          <div class="calculator-title">Sedatives & Analgesics</div>
          <div style="font-size: 0.8em; color: var(--text-secondary);">
            <div style="margin-bottom: 8px;"><strong>Propofol:</strong> 500 mg in 50 mL (10 mg/mL)</div>
            <div style="margin-bottom: 8px;"><strong>Midazolam:</strong> 50 mg in 50 mL (1 mg/mL)</div>
            <div style="margin-bottom: 8px;"><strong>Fentanyl:</strong> 1000 mcg in 50 mL (20 mcg/mL)</div>
            <div><strong>Morphine:</strong> 50 mg in 50 mL (1 mg/mL)</div>
          </div>
        </div>
        
        <div class="calculator-card">
          <div class="calculator-title">Other Common Infusions</div>
          <div style="font-size: 0.8em; color: var(--text-secondary);">
            <div style="margin-bottom: 8px;"><strong>Insulin:</strong> 50 units in 50 mL (1 unit/mL)</div>
            <div style="margin-bottom: 8px;"><strong>Heparin:</strong> 25,000 units in 250 mL (100 units/mL)</div>
            <div style="margin-bottom: 8px;"><strong>Nitroglycerin:</strong> 50 mg in 250 mL (200 mcg/mL)</div>
            <div><strong>Lidocaine:</strong> 2 g in 250 mL (8 mg/mL)</div>
          </div>
        </div>
      </div>
    </section>
  </div>

  <footer>
    <p><a href="https://t.me/utopiccc">‚ìáÔ∏é2025 Dr. Kiranraj</a> | Medical Infusion Rate Calculator</p>
  </footer>

  <script>
    // Handle custom drop factor input
    document.getElementById('drop-factor').addEventListener('change', function() {
      const customInput = document.getElementById('custom-drop-factor');
      if (this.value === 'custom') {
        customInput.style.display = 'block';
        customInput.focus();
      } else {
        customInput.style.display = 'none';
        calculateRate();
      }
    });

    // Rate Calculator (mL/hr & gtts/min)
    function calculateRate() {
      const totalVolume = parseFloat(document.getElementById('total-volume').value);
      const timeHours = parseFloat(document.getElementById('time-hours').value) || 0;
      const timeMinutes = parseFloat(document.getElementById('time-minutes').value) || 0;
      
      const dropFactorSelect = document.getElementById('drop-factor');
      let dropFactor;
      
      if (dropFactorSelect.value === 'custom') {
        dropFactor = parseFloat(document.getElementById('custom-drop-factor').value);
      } else {
        dropFactor = parseFloat(dropFactorSelect.value);
      }
      
      if (!totalVolume || totalVolume <= 0) {
        document.getElementById('rate-result').textContent = '--';
        document.getElementById('drip-result').textContent = '--';
        document.getElementById('rate-note').textContent = 'Enter valid volume';
        return;
      }
      
      const totalTimeHours = timeHours + (timeMinutes / 60);
      
      if (totalTimeHours <= 0) {
        document.getElementById('rate-result').textContent = '--';
        document.getElementById('drip-result').textContent = '--';
        document.getElementById('rate-note').textContent = 'Enter valid time';
        return;
      }
      
      // Calculate infusion rate (mL/hr)
      const infusionRate = totalVolume / totalTimeHours;
      
      // Calculate drip rate (gtts/min)
      const dripRate = (totalVolume * dropFactor) / (totalTimeHours * 60);
      
      document.getElementById('rate-result').textContent = `${infusionRate.toFixed(1)} mL/hr`;
      document.getElementById('drip-result').textContent = `${dripRate.toFixed(1)} gtts/min`;
      
      let note = '';
      if (dropFactor === 60) {
        note = 'Microdrip set: mL/hr = gtts/min';
      } else if (infusionRate > 150) {
        note = 'High flow rate - consider pump limits';
      } else if (infusionRate < 5) {
        note = 'Low flow rate - use syringe pump';
      }
      
      document.getElementById('rate-note').textContent = note;
    }

    // Dose-Based Rate Calculator
    function calculateDoseRate() {
      const desiredDose = parseFloat(document.getElementById('desired-dose').value);
      const doseUnit = document.getElementById('dose-unit').value;
      const patientWeight = parseFloat(document.getElementById('patient-weight').value);
      const medAmount = parseFloat(document.getElementById('med-amount').value);
      const medUnit = document.getElementById('med-unit').value;
      const medVolume = parseFloat(document.getElementById('med-volume').value);
      
      if (!desiredDose || desiredDose <= 0 || !medAmount || medAmount <= 0 || !medVolume || medVolume <= 0) {
        document.getElementById('dose-rate-result').textContent = '--';
        document.getElementById('dose-rate-note').textContent = 'Enter valid values';
        return;
      }
      
      // Convert everything to consistent units (mcg)
      let doseInMcgPerMin;
      
      switch(doseUnit) {
        case 'mcg/kg/min':
          if (!patientWeight || patientWeight <= 0) {
            document.getElementById('dose-rate-result').textContent = '--';
            document.getElementById('dose-rate-note').textContent = 'Enter patient weight';
            return;
          }
          doseInMcgPerMin = desiredDose * patientWeight;
          break;
        case 'mg/kg/min':
          if (!patientWeight || patientWeight <= 0) {
            document.getElementById('dose-rate-result').textContent = '--';
            document.getElementById('dose-rate-note').textContent = 'Enter patient weight';
            return;
          }
          doseInMcgPerMin = desiredDose * patientWeight * 1000;
          break;
        case 'mcg/min':
          doseInMcgPerMin = desiredDose;
          break;
        case 'mg/min':
          doseInMcgPerMin = desiredDose * 1000;
          break;
        case 'units/kg/hr':
          if (!patientWeight || patientWeight <= 0) {
            document.getElementById('dose-rate-result').textContent = '--';
            document.getElementById('dose-rate-note').textContent = 'Enter patient weight';
            return;
          }
          // For insulin and similar - convert to mcg/min equivalent
          doseInMcgPerMin = (desiredDose * patientWeight) / 60;
          break;
        case 'units/hr':
          doseInMcgPerMin = desiredDose / 60;
          break;
        default:
          doseInMcgPerMin = desiredDose;
      }
      
      // Calculate concentration in mcg/mL
      let concentrationMcgPerMl;
      
      switch(medUnit) {
        case 'mg':
          concentrationMcgPerMl = (medAmount * 1000) / medVolume;
          break;
        case 'mcg':
          concentrationMcgPerMl = medAmount / medVolume;
          break;
        case 'g':
          concentrationMcgPerMl = (medAmount * 1000000) / medVolume;
          break;
        case 'units':
          // For medications like insulin, heparin where units are used directly
          concentrationMcgPerMl = medAmount / medVolume;
          break;
        default:
          concentrationMcgPerMl = medAmount / medVolume;
      }
      
      // Calculate infusion rate (mL/hr)
      // Formula: (dose in mcg/min * 60 min/hr) / concentration in mcg/mL
      let infusionRate;
      
      if (doseUnit === 'units/kg/hr' || doseUnit === 'units/hr') {
        // For medications dosed in units/hr
        infusionRate = desiredDose / (medAmount / medVolume);
        if (doseUnit === 'units/kg/hr') {
          infusionRate *= patientWeight;
        }
      } else {
        infusionRate = (doseInMcgPerMin * 60) / concentrationMcgPerMl;
      }
      
      document.getElementById('dose-rate-result').textContent = `${infusionRate.toFixed(1)} mL/hr`;
      
      let note = '';
      if (infusionRate > 150) {
        note = 'High flow rate - verify pump limits';
      } else if (infusionRate < 1) {
        note = 'Very low flow - use syringe pump';
      } else if (infusionRate < 5) {
        note = 'Low flow rate - consider syringe pump';
      }
      
      document.getElementById('dose-rate-note').textContent = note;
    }

    // Duration Calculator
    function calculateDuration() {
      const totalVolume = parseFloat(document.getElementById('duration-volume').value);
      const infusionRate = parseFloat(document.getElementById('infusion-rate').value);
      
      if (!totalVolume || totalVolume <= 0 || !infusionRate || infusionRate <= 0) {
        document.getElementById('duration-result').textContent = '--';
        document.getElementById('duration-note').textContent = 'Enter valid values';
        return;
      }
      
      const totalHours = totalVolume / infusionRate;
      const hours = Math.floor(totalHours);
      const minutes = Math.round((totalHours - hours) * 60);
      
      let durationText = '';
      if (hours > 0) {
        durationText += `${hours} hr`;
        if (hours > 1) durationText += 's';
      }
      if (minutes > 0) {
        if (hours > 0) durationText += ' ';
        durationText += `${minutes} min`;
      }
      
      if (hours === 0 && minutes === 0) {
        durationText = 'Less than 1 minute';
      }
      
      document.getElementById('duration-result').textContent = durationText;
      
      let note = '';
      if (totalHours > 24) {
        const days = (totalHours / 24).toFixed(1);
        note = `Approximately ${days} days`;
      } else if (totalHours < 0.5) {
        note = 'Short infusion - monitor closely';
      }
      
      document.getElementById('duration-note').textContent = note;
    }

    // Volume Calculator
    function calculateVolume() {
      const infusionRate = parseFloat(document.getElementById('volume-rate').value);
      const volumeHours = parseFloat(document.getElementById('volume-hours').value) || 0;
      const volumeMinutes = parseFloat(document.getElementById('volume-minutes').value) || 0;
      
      if (!infusionRate || infusionRate <= 0) {
        document.getElementById('volume-result').textContent = '--';
        document.getElementById('volume-note').textContent = 'Enter valid rate';
        return;
      }
      
      const totalTimeHours = volumeHours + (volumeMinutes / 60);
      
      if (totalTimeHours <= 0) {
        document.getElementById('volume-result').textContent = '--';
        document.getElementById('volume-note').textContent = 'Enter valid time';
        return;
      }
      
      const totalVolume = infusionRate * totalTimeHours;
      
      document.getElementById('volume-result').textContent = `${totalVolume.toFixed(1)} mL`;
      
      let note = '';
      if (totalVolume > 1000) {
        note = 'Large volume - monitor fluid balance';
      } else if (totalVolume < 10) {
        note = 'Small volume - verify calculation';
      }
      
      document.getElementById('volume-note').textContent = note;
    }

    // Dark mode toggle
    function toggleDarkMode() {
      document.body.classList.toggle('dark-mode');
      const isDark = document.body.classList.contains('dark-mode');
      localStorage.setItem('darkMode', isDark);
      document.querySelector('.dark-mode-toggle').textContent = isDark ? '‚òÄÔ∏è Light Mode' : 'üåô Dark Mode';
    }

    // Initialize on load
    window.onload = function() {
      const savedDarkMode = localStorage.getItem('darkMode') === 'true';
      if (savedDarkMode) {
        document.body.classList.add('dark-mode');
        document.querySelector('.dark-mode-toggle').textContent = '‚òÄÔ∏è Light Mode';
      }
      
      // Set up initial calculations
      calculateRate();
      calculateDoseRate();
      calculateDuration();
      calculateVolume();
    };
  </script>
</body>
</html>